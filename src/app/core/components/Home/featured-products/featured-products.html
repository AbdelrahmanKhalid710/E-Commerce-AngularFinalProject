<section class="featured-products py-5">
  <div class="container">
    <div class="text-center mb-5">
      <h2 class="fw-bold mb-3">Featured Products</h2>
      <p class="lead text-muted">Discover our most popular items</p>
    </div>

    @if (loading()) {
      <div class="text-center py-5">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-3 text-muted">Loading featured products...</p>
      </div>
    }

    @if (error() && !loading()) {
      <div class="alert alert-warning text-center">
        {{ error() }}
        <button class="btn btn-sm btn-outline-primary ms-2" (click)="loadFeaturedProducts()">
          Try Again
        </button>
      </div>
    }

    @if (!loading() && !error()) {
      <div class="row g-4">
  @for (product of featuredProducts(); track product._id) {
  <div class="col-xl-3 col-lg-4 col-md-6">
    <app-product-card
      [product]="product"
      [isFavorite]="isFavorite(product._id)"
      (addToCart)="onAddToCart($event)"
      (toggleFavorite)="onToggleFavorite($event)"
    />
  </div>
}

</div>
    }

    @if (!loading() && !error() && featuredProducts().length === 0) {
      <div class="text-center py-5">
        <i class="bi bi-inbox display-1 text-muted"></i>
        <h4 class="text-muted mt-3">No featured products found</h4>
        <p class="text-muted">Check back later for new arrivals</p>
      </div>
    }

    @if (featuredProducts().length > 0) {
      <div class="text-center mt-5">
        <a routerLink="/products" class="btn btn-primary btn-lg px-5">
          View All Products
        </a>
      </div>
    }
  </div>
</section>