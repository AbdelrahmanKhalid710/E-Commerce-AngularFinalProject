<div class="container py-5">
  <!-- Header -->
  <div class="row mb-4">
    <div class="col-12">
      <nav aria-label="breadcrumb" class="mb-3">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a routerLink="/">Home</a></li>
          <li class="breadcrumb-item active">Products</li>
        </ol>
      </nav>

      <div class="d-flex justify-content-between align-items-center">
        <div>
          <h1 class="h2 fw-bold">
            @if (currentCategory()) {
              {{ currentCategory() | titlecase }}
            } @else {
              All Products
            }
          </h1>
          <p class="text-muted mb-0">
            {{ products().length }} products found
          </p>
        </div>
        
        @if (currentCategory()) {
          <button class="btn btn-outline-secondary" (click)="clearFilters()">
            Clear Filter
          </button>
        }
      </div>
    </div>
  </div>

  <!-- Loading State -->
  @if (loading()) {
    <div class="text-center py-5">
      <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-3 text-muted">Loading products...</p>
    </div>
  }

  <!-- Error State -->
  @if (error() && !loading()) {
    <div class="alert alert-warning text-center">
      {{ error() }}
      <button class="btn btn-sm btn-outline-primary ms-2" (click)="loadProducts(currentCategory() || undefined)">
        Try Again
      </button>
    </div>
  }

  <!-- Products Grid -->
  @if (!loading() && !error()) {
    <div class="row g-4">
      @for (product of products(); track product._id) {
        <div class="col-xl-3 col-lg-4 col-md-6">
          <app-product-card 
            [product]="product"
            (addToCart)="onAddToCart($event)"
            (toggleFavorite)="onToggleFavorite($event)">
          </app-product-card>
        </div>
      }
    </div>

    <!-- Empty State -->
    @if (products().length === 0) {
      <div class="text-center py-5">
        <i class="bi bi-inbox display-1 text-muted"></i>
        <h3 class="text-muted mt-3">No products found</h3>
        <p class="text-muted mb-4">Try adjusting your filters or search terms</p>
        <button class="btn btn-primary" (click)="clearFilters()">
          View All Products
        </button>
      </div>
    }
  }
</div>